@{ Layout = "../Shared/_Layout.cshtml"; }

<el-card>
  <div slot="header" class="clearfix">
    <span>模板管理</span>
    <el-dropdown style="float: right; padding: 3px 0" v-on:command="btnAddClick">
      <a href="javascript:;">
        新增模板<i class="el-icon-arrow-down el-icon--right"></i>
      </a>
      <el-dropdown-menu slot="dropdown">
        <el-dropdown-item command="IndexPageTemplate">添加首页模板</el-dropdown-item>
        <el-dropdown-item command="ChannelTemplate">添加栏目模板</el-dropdown-item>
        <el-dropdown-item command="ContentTemplate">添加内容模板</el-dropdown-item>
        <el-dropdown-item command="FileTemplate">添加单页模板</el-dropdown-item>
      </el-dropdown-menu>
    </el-dropdown>
  </div>
<el-container>
  <el-aside width="200px">
    <div>
      <el-link style="float: right; padding: 3px 0" icon="el-icon-edit">隐藏</el-link>
    </div>
    <el-menu :default-openeds="['1']">
      <el-submenu index="1">
        <template slot="title"><i class="el-icon-message"></i>导航一</template>
        <el-menu-item index="1-1">选项1</el-menu-item>
        <el-menu-item index="1-2">选项2</el-menu-item>
      </el-submenu>
    </el-menu>
  </el-aside>
  
  <el-container>
    <el-main>
        <div class="text item">
    <el-form :inline="true" :model="formInline" size="mini">
      <el-form-item label="站点">
        <el-cascader
        ref="sites"
        :options="siteOptions"
        :props="{ multiple: true, checkStrictly: true }"
        clearable></el-cascader>
      </el-form-item>
      <el-form-item label="类型">
        <el-select v-model="formInline.logType" placeholder="请选择">
          <el-option label="<全部>" value="></el-option>
          <el-option label="栏目相关记录" value="Channel"></el-option>
          <el-option label="内容相关记录" value="Content"></el-option>
        </el-select>
      </el-form-item>
      <el-form-item label="时间：从">
        <el-date-picker
          v-model="formInline.dateFrom"
          type="date"
          placeholder="选择开始日期">
        </el-date-picker>
      </el-form-item>
      <el-form-item label="到">
        <el-date-picker
          v-model="formInline.dateTo"
          type="date"
          placeholder="选择结束日期">
        </el-date-picker>
      </el-form-item>
      <el-form-item label="管理员">
        <el-input v-model="formInline.userName" placeholder="管理员"></el-input>
      </el-form-item>
      <el-form-item label="关键字">
        <el-input v-model="formInline.keyword" placeholder="关键字"></el-input>
      </el-form-item>
      
      <el-form-item>
        <el-button type="primary" v-on:click="btnSearchClick">查询</el-button>
      </el-form-item>
    </el-form>

    <el-table
      :data="items"
      style="width: 100%">
      <el-table-column
        label="站点名称">
        <template slot-scope="scope">
          <a :href="scope.row.webUrl" target="_blank">{{scope.row.siteName}}</a>
        </template>
      </el-table-column>
      <el-table-column
        label="管理员">
        <template slot-scope="scope">
          <a :href="'adminView.cshtml?userName=' + scope.row.userName + '&returnUrl=' + encodeURIComponent(location.href)">{{scope.row.userName}}</a>
        </template>
      </el-table-column>
      <el-table-column
        prop="ipAddress"
        label="IP地址">
      </el-table-column>
      <el-table-column
        prop="addDate"
        width="180"
        label="日期">
      </el-table-column>
      <el-table-column
        prop="action"
        label="动作">
      </el-table-column>
      <el-table-column
        prop="summary"
        label="描述">
      </el-table-column>
    </el-table>

    <div class="text-center mt-3">
      <el-pagination
        v-on:current-change="handleCurrentChange"
        :current-page="formInline.currentPage"
        :page-size="formInline.limit"
        layout="total, prev, pager, next, jumper"
        :total="count">
      </el-pagination>
    </div>

    <hr />

    <el-button size="small" type="primary" v-on:click="btnAddClick('IndexPageTemplate')">添加首页模板</el-button>
    <el-button size="small" type="primary" v-on:click="btnAddClick('ChannelTemplate')">添加栏目模板</el-button>
    <el-button size="small" type="primary" v-on:click="btnAddClick('ContentTemplate')">添加内容模板</el-button>
    <el-button size="small" type="primary" v-on:click="btnAddClick('FileTemplate')">添加单页模板</el-button>
  </div>
    </el-main>
  </el-container>
</el-container>
</el-card>



@section Scripts{
<script src="templates.js" type="text/javascript"></script> }