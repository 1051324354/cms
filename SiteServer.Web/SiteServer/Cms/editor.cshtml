@{ Layout = "../Shared/_LayoutLayer.cshtml"; }

<div class="text-right">
  <el-button size="medium" v-on:click="btnPreviewClick">预 览</el-button>
  <el-button size="medium" v-on:click="btnSaveClick" type="success">保 存</el-button>
  <el-button size="medium" icon="el-icon-setting" circle :type="isSettings ? 'info' : ''" v-on:click="isSettings = !isSettings"></el-button>
</div>

<hr />

<el-container style="padding-top: 0; padding-bottom: 0; overflow:auto;" :style="{height: mainHeight}">
  <el-main style="padding-top: 0;">

    <el-row v-for="style in styles" class="mb-3">

      <el-row>
        <el-col :span="4">
          <label>
            {{ style.displayName }}
            <small v-if="style.helpText" class="text-muted">{{ style.helpText }}</small>
            <span v-if="style.veeValidate && style.veeValidate.indexOf('required') !== -1" class="text-danger">*</span>
            <small v-show="errors.has(style.attributeName)" class="text-danger">{{
              errors.first(style.attributeName) }}</small>
          </label>
        </el-col>
        <el-col :span="20" style="text-align: right">
          <template v-if="style.inputType === 'Image'">
            <el-button size="mini" round plain type="primary" style="margin-top: -2px;" v-on:click="btnLayerClick({ title: '上传图片', name: 'Image', full: true, args: {attributeName: style.attributeName, inputType: style.inputType} })">上传</el-button>
            <el-button size="mini" round plain type="primary" style="margin-top: -2px;" v-if="style.value" v-on:click="btnImageClick(style.value)">预览</el-button>
          </template>
          <template v-else-if="style.inputType === 'TextEditor'">
            <el-button-group style="margin-top: -2px;">
              <el-button size="mini" plain type="info" v-on:click="btnLayerClick({title: '批量导入Word', name: 'Word', full: true}, $event)">导入Word</el-button>
              <el-button size="mini" plain type="info" onClick="utils.openLayer({title: '插入图片', url: 'modalTextEditorInsertImage.aspx?siteId=1&amp;attributeName=Content', width: 700, height: 550});">插入图片</el-button>
              <el-button size="mini" plain type="info" onClick="utils.openLayer({title: '插入视频', url: 'modalTextEditorInsertVideo.aspx?siteId=1&amp;AttributeName=Content', width: 600, height: 520});">插入视频</el-button>
              <el-button size="mini" plain type="info" onClick="utils.openLayer({title: '插入音频', url: 'modalTextEditorInsertAudio.aspx?siteId=1&amp;AttributeName=Content', width: 600, height: 400});">插入音频</el-button>
              <el-button size="mini" plain type="info" onClick="getWordSpliter();return false;">提取关键字</el-button>
              <el-button size="mini" plain type="info" onClick="detection_Content();return false;">敏感词检测</el-button>
            </el-button-group>
          </template>
        </el-col>
      </el-row>

      <el-row>
        <template v-if="style.inputType === 'Image'">
          <el-input size="medium" placeholder="请输入图片地址或点击右侧上传按钮" v-model="style.value" :name="style.attributeName" :data-vv-as="style.displayName" v-validate="style.veeValidate"
            :class="{'is-invalid': errors.has(style.attributeName)}">
            <el-button slot="append" icon="el-icon-upload">上传</el-button>
          </el-input>
        </template>
        <template v-else-if="style.inputType === 'TextArea'">
          <el-input type="textarea" size="medium" v-model="style.value" :autosize="{ minRows: 4, maxRows: 10}"
            :name="style.attributeName" :data-vv-as="style.displayName" v-validate="style.veeValidate"
            :class="{'is-invalid': errors.has(style.attributeName)}"></el-input>
        </template>
        <template v-else-if="style.inputType === 'TextEditor'">
          <textarea v-model="style.value" style="width: 100%" :id="style.attributeName" :name="style.attributeName" :data-vv-as="style.displayName"
            v-validate="style.veeValidate"></textarea>
        </template>
        <template v-else-if="style.inputType === 'Radio'">
          <div class="m-2">
            <div v-for="(styleItem, index) in style.styleItems" class="radio radio-primary form-check-inline">
              <input v-model="style.value" type="radio" :id="styleItem.itemValue" :value="styleItem.itemValue"
                :name="style.attributeName">
              <label :for="styleItem.itemValue"> {{ styleItem.itemTitle }} </label>
            </div>
          </div>
        </template>
        <template v-else>
          <el-input v-model="style.value" size="medium" autosize type="text" :name="style.attributeName"
            :data-vv-as="style.displayName" v-validate="style.veeValidate" :class="{'is-invalid': errors.has(style.attributeName)}"></el-input>
        </template>
      </el-row>

    </el-row>
  </el-main>
  <el-aside v-if="isSettings" width="280px">
    <el-tabs v-model="sideType" type="border-card">
      <el-tab-pane label="设置" name="first">
        <el-collapse v-model="collapseType">
          <el-collapse-item title="审核状态" name="0">
            <el-select v-model="content.checkedLevel" size="medium" style="width: 100%;">
              <el-option
                v-for="level in checkedLevels"
                :key="level.value"
                :label="level.label"
                :value="level.value"></el-option>
            </el-select>
          </el-collapse-item>
          <el-collapse-item title="内容属性" name="1">
            <el-checkbox v-model="content.top">置顶</el-checkbox>
            <el-checkbox v-model="content.recommend">推荐</el-checkbox>
            <el-checkbox v-model="content.hot">热点</el-checkbox>
            <el-checkbox v-model="content.color">醒目</el-checkbox>
          </el-collapse-item>
          <el-collapse-item title="内容组" name="2">
            <el-checkbox v-model="content.groupNames" v-for="groupName in groupNames" :key="groupName">{{ groupName }}</el-checkbox>
            <div>
               <el-button size="mini" type="primary" icon="el-icon-plus">添加内容组</el-button>
            </div>
          </el-collapse-item>
          <el-collapse-item title="标签" name="3">
            <el-select
              v-model="content.tagNames"
              style="width: 100%;"
              size="medium"
              multiple
              filterable
              allow-create
              default-first-option
              placeholder="请选择内容标签">
              <el-option
                v-for="tagName in tagNames"
                :key="tagName"
                :label="tagName"
                :value="tagName">
              </el-option>
            </el-select>
            <small class="form-text text-muted">输入文字后回车可以创建并选中选项中不存在的条目</small>
          </el-collapse-item>
          <el-collapse-item title="外部链接" name="4">
            <el-input v-model="content.linkUrl" name="linkUrl" placeholder="设置后链接将指向此地址" size="medium" autosize type="textarea" data-vv-as="外部链接" v-validate="'url'" :class="{'is-invalid': errors.has('linkUrl') }"></el-input>
            <small class="form-text text-muted">设置外部链接后系统将不会生成内容页面</small>
          </el-collapse-item>
          <el-collapse-item title="添加时间" name="5">
            <el-date-picker
              v-model="content.addDate"
              type="datetime"
              placeholder="选择内容添加时间">
            </el-date-picker>
          </el-collapse-item>
        </el-collapse>
      </el-tab-pane>
      <el-tab-pane label="更多" name="second">
        <el-collapse>
          <el-collapse-item title="同时转移到" name="6">

            <el-form v-if="transForm" :model="transForm" size="mini">
              <el-form-item label="站点">
                <el-cascader
                  v-model="transForm.siteId"
                  :options="siteOptions"
                  :props="{ multiple: false, checkStrictly: true }"
                  clearable></el-cascader>
              </el-form-item>
              <el-form-item label="栏目">
                <el-cascader
                  v-if="channelOptions"
                  v-model="transForm.channelId"
                  :options="channelOptions"
                  :props="{ multiple: false, checkStrictly: true }"
                  clearable></el-cascader>
              </el-form-item>
              <el-form-item label="类型">
                <el-select v-model="transForm.transType" placeholder="请选择">
                  <el-option label="复制" value="Copy"></el-option>
                  <el-option label="引用地址" value="Reference"></el-option>
                  <el-option label="引用内容" value="ReferenceContent"></el-option>
                </el-select>
              </el-form-item>
              <el-form-item align="center">
                <el-button v-on:click="btnTransSaveClick" size="mini" type="primary">添加</el-button>
                <el-button v-on:click="btnTransCancelClick" size="mini">取消</el-button>
              </el-form-item>
            </el-form>

            <el-button v-else v-on:click="btnTransAddClick" size="mini" type="primary">新增转移</el-button>
          </el-collapse-item>
        </el-collapse>
      </el-tab-pane>
    </el-tabs>
  </el-aside>
</el-container>



@section Scripts{
<script type="text/javascript" src="../assets/ueditor/editor_config.js"></script>
<script type="text/javascript" src="../assets/ueditor/ueditor_all_min.js"></script>
<script src="editor.js" type="text/javascript"></script> }