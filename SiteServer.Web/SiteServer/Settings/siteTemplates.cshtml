@{ Layout = "../Shared/_Layout.cshtml"; } @section Navs{
<li class="nav-item">
  <a class="nav-link" href="site.cshtml">站点管理</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="siteUrl.cshtml">站点访问地址</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="siteTables.cshtml">站点内容表</a>
</li>
<li class="nav-item">
  <a class="nav-link active" href="siteTemplates.cshtml">站点模板管理</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="siteTemplateOnline.cshtml">在线站点模板</a>
</li>
}

<el-table
  :data="siteTemplateInfoList"
  style="width: 100%">
  <el-table-column
    prop="siteTemplateName"
    label="站点模板名称">
  </el-table-column>
  <el-table-column
    prop="directoryName"
    label="站点模板文件夹">
  </el-table-column>
  <el-table-column
    prop="description"
    label="站点模板介绍">
  </el-table-column>
  <el-table-column label="操作" width="330">
    <template slot-scope="scope">
      <el-button-group>
        <el-button
          v-if="scope.row.fileExists"
          size="mini"
          v-on:click="btnZipClick(scope.row)">重新压缩</el-button>
        <el-button
          v-if="scope.row.fileExists"
          size="mini"
          v-on:click="btnDownloadClick(scope.row)">下载压缩包</el-button>
        <el-button
          v-if="!scope.row.fileExists"
          size="mini"
          v-on:click="btnZipClick(scope.row)">压缩</el-button>
        <el-button
          size="mini"
          v-on:click="btnCreateClick(scope.row)">创建站点</el-button>
        <el-button
          size="mini"
          type="danger"
          v-on:click="btnDeleteClick(scope.row)">删除</el-button>
      </el-button-group>
    </template>
  </el-table-column>
</el-table>

<hr v-if="fileNameList && fileNameList.length > 0" />

<el-table
  v-if="fileNameList && fileNameList.length > 0"
  :data="fileNameList"
  style="width: 100%">
  <el-table-column label="未解压站点模板">
    <template slot-scope="scope">
      {{ scope.row }}
    </template>
  </el-table-column>
  <el-table-column label="操作" width="330">
    <template slot-scope="scope">
      <el-button-group>
        <el-button
          size="mini"
          v-on:click="btnUnZipClick(scope.row)">解压</el-button>
        <el-button
          size="mini"
          v-on:click="btnDownloadFileClick(scope.row)">下载压缩包</el-button>
        <el-button
          size="mini"
          type="danger"
          v-on:click="btnDeleteFileClick(scope.row)">删除</el-button>
      </el-button-group>
    </template>
  </el-table-column>
</el-table>

<hr />

<a href="javascript:;" v-on:click="btnUploadClick" class="btn btn-primary btn-sm m-r-5">导入站点模板</a>

<el-drawer
  title="导入站点模板"
  ref="uploadPanel"
  :visible.sync="uploadPanel"
  direction="rtl"
  size="50%">
  <div class="drawer__content">
    <br />

    <el-form ref="uploadForm" label-width="200px">
      <el-upload
        :drag="true"
        :limit="1"
        :action="$urlUpload"
        :auto-upload="true"
        :with-credentials="true"
        :file-list="uploadList"
        :before-upload="uploadBefore"
        :on-progress="uploadProgress"
        :on-success="uploadSuccess"
        :on-error="uploadError"
        :multiple="false">
        <i class="el-icon-upload"></i>
        <div class="el-upload__text">将文件拖到此处，或<em>点击上传</em></div>
        <div class="el-upload__tip" slot="tip">只能上传zip文件</div>
      </el-upload>
    </el-form>
    
  </div>
</el-drawer>

@section Scripts{
<script src="siteTemplates.js" type="text/javascript"></script> }